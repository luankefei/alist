System.register(["./index-legacy.3e487d44.js"],(function(e,t){"use strict";var r,n,s,i,l,g,u,d,a,c,o,h,w,p,$,m,y,k,x,f,_,S,b,A,v,I,C,M,z,O;return{setters:[e=>{r=e.a,n=e.e,s=e.aP,i=e.b2,l=e.i,g=e.a7,u=e.bI,d=e.a_,a=e.bJ,c=e.d6,o=e.B,h=e.b3,w=e.n,p=e.S,$=e.cd,m=e.aC,y=e.r,k=e.M,x=e.j,f=e.b6,_=e.k,S=e.m,b=e.bt,A=e.bg,v=e.I,I=e.T,C=e.q,M=e.X,z=e.v,O=e.t}],execute:function(){const t=[{name:"title",textAlign:"left",w:"calc(35% - 110px)"},{name:"fingerprint",textAlign:"left",w:"calc(65% - 110px)"},{name:"last_used",textAlign:"right",w:"140px"},{name:"operation",textAlign:"right",w:"80px"}],T=e=>{const $=r(),[m,y]=n(!1),[k,x]=e.isMine?s((()=>i.post(`/me/sshkey/delete?id=${e.id}`))):s((()=>i.post(`/admin/user/sshkey/delete?uid=${e.userId}&id=${e.id}`))),f={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};return l(p,{get when(){return!m()},get children(){return l(g,{w:"$full",p:"$2",get children(){return[l(u,{get w(){return t[0].w},size:"sm",get textAlign(){return t[0].textAlign},css:f,get children(){return e.title}}),l(d,{get w(){return t[1].w},size:"sm",get textAlign(){return t[1].textAlign},css:f,get children(){return e.fingerprint}}),l(d,{get w(){return t[2].w},size:"sm",get textAlign(){return t[2].textAlign},css:f,get children(){return`${(t=new Date(e.last_used_time)).getFullYear().toString()}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`;var t}}),l(a,{get w(){return t[3].w},gap:"$1",get children(){return[l(c,{}),l(o,{size:"sm",colorScheme:"danger",get loading(){return k()},onClick:async()=>{const e=await x();h(e,(()=>{w.success($("global.delete_success")),y(!0)}))},get children(){return $("global.delete")}})]}})]}})}})};e("P",(e=>{const w=r(),[j,B]=n([]),[D,P]=e.isMine?s((()=>i.get("/me/sshkey/list"))):s((()=>i.get(`/admin/user/sshkey/list?uid=${e.userId}`))),[X,q]=$({title:"",key:""}),[F,H]=s((()=>i.post("/me/sshkey/add",X))),{isOpen:J,onOpen:W,onClose:Y}=m(),E=async()=>{const e=await P();h(e,(e=>{B(e.content)}))};E();const G=e=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:e.textAlign});return l(M,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[l(a,{w:"$full",get children(){return[l(u,{get children(){return w("users.ssh_keys.heading")}}),l(p,{get when(){return e.isMine},get children(){return[l(c,{}),l(o,{get loading(){return D()},onClick:W,get children(){return w("global.add")}}),l(y,{get opened(){return J()},onClose:Y,scrollBehavior:"inside",get children(){return[l(k,{}),l(x,{get children(){return[l(f,{}),l(_,{get children(){return w("users.ssh_keys.add_heading")}}),l(S,{get children(){return[l(b,{mb:"$4",get children(){return[l(A,{for:"add_title",get children(){return w("users.ssh_keys.title")}}),l(v,{id:"add_title",get value(){return X.title},onInput:e=>q("title",e.currentTarget.value)})]}}),l(b,{get children(){return[l(A,{for:"add_key",get children(){return w("users.ssh_keys.key")}}),l(I,{id:"add_key",get value(){return X.key},onInput:e=>q("key",e.currentTarget.value)})]}})]}}),l(C,{get children(){return l(o,{get loading(){return F()},onClick:async()=>{const e=await H();h(e,(()=>{q("title",""),q("key",""),E(),Y()}))},get children(){return w("global.add")}})}})]}})]}})]}})]}}),l(M,{w:"$full",overflowX:"auto",shadow:"$md",rounded:"$lg",spacing:"$1",p:"$1",get children(){return[l(g,{class:"title",w:"$full",p:"$2",get children(){return[l(d,z({get w(){return t[0].w}},(()=>G(t[0])),{get children(){return w(`users.ssh_keys.${t[0].name}`)}})),l(d,z({get w(){return t[1].w}},(()=>G(t[1])),{get children(){return w(`users.ssh_keys.${t[1].name}`)}})),l(d,z({get w(){return t[2].w}},(()=>G(t[2])),{get children(){return w(`users.ssh_keys.${t[2].name}`)}})),l(d,z({get w(){return t[3].w}},(()=>G(t[3])),{get children(){return w(`users.ssh_keys.${t[3].name}`)}}))]}}),O((()=>j().map((t=>l(T,z(e,t))))))]}})]}})}))}}}));
