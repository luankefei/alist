System.register(["./index-legacy.3e487d44.js","./FolderTree-legacy.952f4208.js","./PublicKeys-legacy.a9e4cfa2.js","./index-legacy.e1a1cc1b.js"],(function(e,r){"use strict";var n,t,a,s,i,l,d,u,c,g,o,p,h,m,f,w,b,y,x,$,I,_,v,C,k;return{setters:[e=>{n=e.a,t=e.b,a=e.cd,s=e.aP,i=e.b2,l=e.i,d=e.X,u=e.bI,c=e.S,g=e.a9,o=e.bt,p=e.bg,h=e.I,m=e.bJ,f=e.w,w=e.ay,b=e.cb,y=e.B,x=e.b3,$=e.n,I=e.aa,_=e.d0,v=e.a0},e=>{C=e.a},e=>{k=e.P},()=>{}],execute:function(){const r=e=>{const r=n();return l(o,{display:"inline-flex",flexDirection:"row",alignItems:"center",gap:"$2",rounded:"$md",shadow:"$md",p:"$2",w:"fit-content",get children(){return[l(p,{mb:"0",get children(){return r(`users.permissions.${e.name}`)}}),l(b,{get checked(){return e.can},onChange:()=>e.onChange(!e.can)})]}})};e("default",(()=>{const e=n(),{params:j,back:q}=t(),{id:D}=j,[S,T]=a({id:0,username:"",password:"",base_path:"",role:0,permission:0,disabled:!1,sso_id:""}),[P,F]=s((()=>i.get(`/admin/user/get?id=${D}`)));D&&(async()=>{const e=await F();x(e,T)})();const[z,B]=s((()=>i.post("/admin/user/"+(D?"update":"create"),S)));return l(v,{get loading(){return P()},get children(){return l(d,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[l(u,{get children(){return e("global."+(D?"edit":"add"))}}),l(c,{get when(){return!g.is_guest(S)},get children(){return[l(o,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[l(p,{for:"username",display:"flex",alignItems:"center",get children(){return e("users.username")}}),l(h,{id:"username",get value(){return S.username},onInput:e=>T("username",e.currentTarget.value)})]}}),l(o,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[l(p,{for:"password",display:"flex",alignItems:"center",get children(){return e("users.password")}}),l(h,{id:"password",type:"password",placeholder:"********",get value(){return S.password},onInput:e=>T("password",e.currentTarget.value)})]}})]}}),l(o,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[l(p,{for:"base_path",display:"flex",alignItems:"center",get children(){return e("users.base_path")}}),l(C,{id:"base_path",get value(){return S.base_path},onChange:e=>T("base_path",e),onlyFolder:!0})]}}),l(o,{w:"$full",required:!0,get children(){return[l(p,{display:"flex",alignItems:"center",get children(){return e("users.permission")}}),l(m,{w:"$full",wrap:"wrap",gap:"$2",get children(){return l(f,{each:w,children:(e,n)=>l(r,{name:e,get can(){return g.can(S,n())},onChange:e=>{T("permission",e?S.permission|=1<<n():S.permission&=~(1<<n()))}})})}})]}}),l(o,{w:"fit-content",display:"flex",get children(){return l(b,{css:{whiteSpace:"nowrap"},id:"disabled",onChange:e=>T("disabled",e.currentTarget.checked),color:"$neutral10",fontSize:"$sm",get checked(){return S.disabled},get children(){return e("users.disabled")}})}}),l(y,{get loading(){return z()},onClick:async()=>{const r=await B();x(r,(async()=>{$.success(e("global.save_success")),S.username===I().username&&x(await i.get("/me"),_),q()}))},get children(){return e("global."+(D?"save":"add"))}}),l(c,{get when(){return D&&!g.is_guest(S)},get children(){return l(k,{isMine:!1,get userId(){return parseInt(D)}})}})]}})}})}))}}}));
