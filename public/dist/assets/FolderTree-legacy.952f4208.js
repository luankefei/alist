System.register(["./index-legacy.3e487d44.js","./index-legacy.e1a1cc1b.js"],(function(e,r){"use strict";var n,t,o,l,a,u,c,i,g,d,h,s,p,v,f,b,C,w,m,y,$,k,_,F,O,x,S,I,P,z,E,H,R,j,B,M,q,T;return{setters:[e=>{n=e.aC,t=e.a,o=e.i,l=e.I,a=e.S,u=e.B,c=e.a7,i=e.M,g=e.j,d=e.b6,h=e.k,s=e.m,p=e.q,v=e.r,f=e.e,b=e.$,C=e.bB,w=e.bC,m=e.aP,y=e.bD,$=e._,k=e.bE,_=e.h,F=e.N,O=e.bF,x=e.ae,S=e.aq,I=e.a_,P=e.A,z=e.t,E=e.p,H=e.X,R=e.w,j=e.d,B=e.bG,M=e.b3},e=>{q=e.e,T=e.f}],execute:function(){const r=B(),X=e("F",(e=>{var n;const[t,l]=f("/");return null===(n=e.handle)||void 0===n||n.call(e,{setPath:l}),o(b,{class:"folder-tree-box",w:"$full",overflowX:"auto",get children(){return o(r.Provider,{get value(){var r,n,o,a;return{value:t,onChange:r=>{l(r),e.onChange(r)},autoOpen:null!==(r=e.autoOpen)&&void 0!==r&&r,forceRoot:null!==(n=e.forceRoot)&&void 0!==n&&n,showEmptyIcon:null!==(o=e.showEmptyIcon)&&void 0!==o&&o,showHiddenFolder:null===(a=e.showHiddenFolder)||void 0===a||a}},get children(){return o(A,{path:"/"})}})}})})),A=e=>{const{isHidePath:t}=C(),[l,u]=f(),{value:i,onChange:g,forceRoot:d,autoOpen:h,showEmptyIcon:s,showHiddenFolder:p}=w(r),[v,B]=m((()=>y(e.path,$(),d)));let X=!1;const D=async()=>{var e;if(null!==(e=l())&&void 0!==e&&e.length)return;const r=await B();M(r,(e=>{X=!0,u(e)}),(()=>{G()&&N()}))},{isOpen:G,onToggle:N}=n(),V=()=>i()===e.path,J=k(e.path);return _(F(i,(async e=>{h&&J(e)&&(G()||N(),X||D())}))),o(a,{get when(){return p||!(t(e.path)&&!J(i()))},get children(){return o(b,{get children(){return[o(c,{spacing:"$2",get children(){return[o(a,{get when(){return!v()},get fallback(){return o(O,{size:"sm",get color(){return x()}})},get children(){return o(a,{get when(){return!Boolean(s&&void 0!==l()&&!(null!==(e=l())&&void 0!==e&&e.length));var e},get fallback(){return o(S,{get color(){return x()},as:q})},get children(){return o(S,{get color(){return x()},as:T,get transform(){return G()?"rotate(90deg)":"none"},transition:"transform 0.2s",cursor:"pointer",onClick:()=>{N(),G()&&D()}})}})}}),o(I,{css:{whiteSpace:"nowrap"},fontSize:"$md",cursor:"pointer",px:"$1",rounded:"$md",get bgColor(){return V()?"$info8":"transparent"},get _hover(){return{bgColor:V()?"$info8":P()}},onClick:()=>{g(e.path)},get children(){return z((()=>"/"===e.path))()?"root":E(e.path)}})]}}),o(a,{get when(){return G()},get children(){return o(H,{mt:"$1",pl:"$4",alignItems:"start",spacing:"$1",get children(){return o(R,{get each(){return l()},children:r=>o(A,{get path(){return j(e.path,r.name)}})})}})}})]}})}})};e("M",(e=>{var r;const n=t(),[l,a]=f(null!==(r=e.defaultValue)&&void 0!==r?r:"/"),[c,d]=f();return _((()=>{var r;e.opened&&(null===(r=c())||void 0===r||r.setPath(l()))})),o(v,{size:"xl",blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},get children(){return[o(i,{}),o(g,{get children(){return[o(h,{get children(){return n("home.toolbar.choose_dst_folder")}}),o(s,{get children(){return o(X,{onChange:a,handle:e=>d(e),autoOpen:!0})}}),o(p,{display:"flex",gap:"$2",get children(){return[o(u,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return n("global.cancel")}}),o(u,{get loading(){return e.loading},onClick:()=>{var r;return null===(r=e.onSubmit)||void 0===r?void 0:r.call(e,l())},get children(){return n("global.ok")}})]}})]}})]}})})),e("a",(e=>{const{isOpen:r,onOpen:f,onClose:b}=n(),C=t();return[o(c,{w:"$full",spacing:"$2",get children(){return[o(l,{get id(){return e.id},get value(){return e.value},onInput:r=>e.onChange(r.currentTarget.value),get readOnly(){return e.onlyFolder},get onClick(){return e.onlyFolder?f:()=>{}},get placeholder(){return C("global."+(e.onlyFolder?"choose_folder":"choose_or_input_path"))}}),o(a,{get when(){return!e.onlyFolder},get children(){return o(u,{onClick:f,get children(){return C("global.choose")}})}})]}}),o(v,{size:"xl",get opened(){return r()},onClose:b,get children(){return[o(i,{}),o(g,{get children(){return[o(d,{}),o(h,{get children(){return C("global.choose_folder")}}),o(s,{get children(){return o(X,{forceRoot:!0,get onChange(){return e.onChange}})}}),o(p,{get children(){return o(u,{onClick:b,get children(){return C("global.confirm")}})}})]}})]}})]}))}}}));
