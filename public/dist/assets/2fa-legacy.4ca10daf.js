System.register(["./index-legacy.3e487d44.js"],(function(e,r){"use strict";var t,n,a,u,s,i,c,o,l,d,g,v,h,f,y,p,b,x,_,w,m;return{setters:[e=>{t=e.b,n=e.aP,a=e.b2,u=e.a,s=e.e,i=e.i,c=e.S,o=e.X,l=e.bI,d=e.an,g=e.t,v=e.a_,h=e.ae,f=e.I,y=e.B,p=e.a0,b=e.aa,x=e.n,_=e.b3,w=e.aR,m=e.d0}],execute:function(){e("default",(()=>{const{back:e}=t(),[r,I]=n((()=>a.post("/auth/2fa/generate"))),$=u(),[k,S]=s(),[q,j]=s("");(async()=>{if(b().otp)return x.warning($("users.2fa_already_enabled")),void e();const r=await I();_(r,S)})();const[z,B]=n((()=>{var e;return a.post("/auth/2fa/verify",{code:q(),secret:null===(e=k())||void 0===e?void 0:e.secret})})),C=async()=>{const r=await B();w(r,(()=>{m({...b(),otp:!0}),e()}))};return i(p,{get loading(){return r()},get children(){return i(c,{get when(){return k()},get children(){return i(o,{spacing:"$2",alignItems:"start",get children(){return[i(l,{get children(){return $("users.scan_qr")}}),i(d,{boxSize:"$xs",rounded:"$lg",get src(){var e;return null===(e=k())||void 0===e?void 0:e.qr}}),i(l,{get children(){return[g((()=>$("users.or_manual"))),":"," ",i(v,{get color(){return h()},get children(){var e;return null===(e=k())||void 0===e?void 0:e.secret}})]}}),i(f,{maxW:"$xs",get placeholder(){return $("users.input_code")},get value(){return q()},onInput:e=>j(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&C()}}),i(y,{get loading(){return z()},onClick:C,get children(){return $("users.verify")}})]}})}})}})}))}}}));
