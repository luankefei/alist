System.register(["./index-legacy.3e487d44.js"],(function(e,t){"use strict";var a,n,o,i,l,r,s,c,d,h,u,v,p,f,g,w;return{setters:[e=>{a=e.b,n=e.aP,o=e.bw,i=e._,l=e.bx,r=e.f,s=e.c,c=e.U,d=e.d,h=e.by,u=e.W,v=e.bz,p=e.bA,f=e.n,g=e.aa,w=e.av}],execute:function(){e({R:function(e){return w({a:{viewBox:"0 0 24 24"},c:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5.463 4.433A9.961 9.961 0 0112 2c5.523 0 10 4.477 10 10 0 2.136-.67 4.116-1.81 5.74L17 12h3A8 8 0 006.46 6.228l-.997-1.795zm13.074 15.134A9.961 9.961 0 0112 22C6.477 22 2 17.523 2 12c0-2.136.67-4.116 1.81-5.74L7 12H4a8 8 0 0013.54 5.772l.997 1.795z"/>'},e)},c:function(e){return w({a:{viewBox:"0 0 24 24"},c:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12.414 5H21a1 1 0 011 1v14a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1h7.414l2 2zM13 13h3l-4-4-4 4h3v4h2v-4z"/>'},e)},d:function(e){return w({a:{viewBox:"0 0 24 24"},c:'<path fill="none" d="M0 0h24v24H0z"/><path d="M16 2l5 5v14.008a.993.993 0 01-.993.992H3.993A1 1 0 013 21.008V2.992C3 2.444 3.445 2 3.993 2H16zm-3 10h3l-4-4-4 4h3v4h2v-4z"/>'},e)},e:M});const t=new Map,b=(e("r",((e,a)=>{t.set(e,a)})),e("b",(e=>{window.scroll({top:t.get(e)||0,behavior:"smooth"}),t.get(e)})));let z,x=!0;function M(e,t,a="replaceState"){let n="location"===a?location.href:location.hash;if(n.includes("?"))if(n.includes(e)){const a=`(\\?|&|#)${e}([^&|^#]*)(&|$|#)`;n=n.replace(new RegExp(a),"$1"+e+"="+t+"$3")}else n=`${n}&${e}=${t}`;else n=`${n}?${e}=${t}`;"location"===a&&(location.href=n),"pushState"===a&&history.pushState({},"",n),"replaceState"===a&&history.replaceState({},"",n)}function S(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var n=t[a].split("=");if(n[0]==e)return n[1]}return""}const y={};let H=1;e("g",(()=>H)),e("a",(()=>{const e=l();H=1,"pagination"===e.type&&M("page",1),console.log("resetGlobalPage",H)})),e("u",(()=>{const{pathname:e,to:t}=a(),[,w]=n((e=>o(e,i()))),M=l();"pagination"===M.type&&S("page")&&(H=parseInt(S("page")));const[,$]=n((e=>{const t={index:null==e?void 0:e.index,size:null==e?void 0:e.size};return r(null==e?void 0:e.path,i(),t.index,t.size,null==e?void 0:e.force,new s.CancelToken((function(e){z=e})))})),m=(t,a=!0,n=!1)=>{n&&(t=d(e(),t)),a?y[t]=!0:delete y[t]};let P=!1;const j=(e,t,a)=>{var n;null===(n=z)||void 0===n||n(),P=null!=t&&t,C(""),y[e]?R(e,H,void 0,void 0,a):A(e)},A=async e=>{h.setState(u.FetchingObj);const t=await w(e);v(t,(t=>{var a;h.setObj(t),h.setProvider(t.provider),t.is_dir?(m(e),R(e,H)):(h.setReadme(t.readme),h.setHeader(t.header),h.setRelated(null!==(a=t.related)&&void 0!==a?a:[]),h.setRawUrl(t.raw_url),h.setState(u.File))}),C)},R=async(e,t,a,n=!1,o)=>{a||(a=M.size),void 0!==a&&"all"===M.type&&(a=void 0),H=null!=t?t:1,h.setState(n?u.FetchingMore:u.FetchingObjs);const i=await $({path:e,index:t,size:a,force:o});v(i,(a=>{var o;n?p(a.content):(h.setObjs(null!==(o=a.content)&&void 0!==o?o:[]),h.setTotal(a.total)),h.setReadme(a.readme),h.setHeader(a.header),h.setWrite(a.write),h.setProvider(a.provider),h.setState(u.Folder),n&&(null!=t?t:1)>1||b(e)}),C)},C=(a,n)=>{if(403===n)h.setState(u.NeedPassword),P&&f.error(a);else{if(x&&a.endsWith("object not found"))return x=!1,void t(e().replace(g().base_path,""));h.setErr(a)}},F=(t,a,n=!1)=>{R(e(),t,a,n)};return{handlePathChange:j,setPathAs:m,refresh:(t,a)=>{j(e(),t,a)},pageChange:F,loadMore:()=>{F(H+1,void 0,!0)},allLoaded:()=>H>=Math.ceil(c.total/M.size)}}))}}}));
